<!--// This file is part of ThessOpenTrip.
// 
// ThessOpenTrip is free software: you can redistribute it and/or modify
// it under the terms of the GNU General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.
// 
// ThessOpenTrip is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.
// 
// You should have received a copy of the GNU General Public License
// along with ThessOpenTrip. If not, see <http://www.gnu.org/licenses/>.-->

<!DOCTYPE html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title> 
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <meta http-equiv="Content-Security-Policy" content="default-src *; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
        
        <script src="components/loader.js"></script>
        
        <link rel="stylesheet" href="components/loader.css">
        <link rel="stylesheet" href="css/bootstrap.css">
        <link rel="stylesheet" href="css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="css/main.css">
        <link href="css/wrap.css" rel="stylesheet" type="text/css"/>
        
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
        
        <!-- Valhalla -->
        <link rel="stylesheet" href="valhalla/leaflet.routing.valhalla.css">
        
        <style>  
            body { 
                padding-top: 50px;
                /*padding-bottom: 20px;*/
                /*margin-left: 20px;*/
                /*margin-right: 20px;*/
                background: url('img/background2.png');// no-repeat scroll 0 0 / 100% 100% transparent !important;
                background-size: 100% 100%; 
                background-position:100% 100%;
                background-repeat: no-repeat;
                padding-bottom: 0px !important;
                margin-bottom: 0px !important;
                width: 100%;
                height: 100%;
            }
        </style>
        

        <!-- GENERAL PAGE NAVIGATION SCRIPTS -->
        <script type="text/javascript" charset="utf-8">
            function onLoad() {
                
                var showAgainLTR = true;
                if(window.localStorage.getItem("showAgainLTR")){
                    showAgainLTR = JSON.parse(window.localStorage.getItem("showAgainLTR"));
                }
                
                var text="Anonymized data is about to be collected including:<br><ul><li>User's position</li></ul>Do you agree?<br><br><input type='checkbox' id='showAgainLTR' checked>Do not show again";
                if (showAgainLTR){
                    bootbox.dialog({
                    closeButton: false,
                        title: "Warning",
                        message: text,
                        className: modalClass,
                            buttons: {
                                success: {
                                label: "Yes",
                                    className: "btn-success",
                                    callback: function () {
                                        if(document.getElementById("showAgainLTR").checked){
                                            showAgainLTR = false;
                                            window.localStorage.setItem("showAgainLTR",showAgainLTR);
                                        }
                                        document.addEventListener("online", onOnline, false);
                                        document.addEventListener("offline", onOffline, false);
                                        document.addEventListener("resume", onResume, false);        
                                        document.addEventListener("deviceready", onDeviceReady, false);
                                        
                                        if(window.localStorage.length>0){
                                            
                                            setTimeout(getToken,2000);
                                            //sometimes is an error here so repeat
                                            setTimeout(getToken,6000);
                                            
                                            //Image Cache
                                            startCache();
                                                           
                                            //var iuser=document.getElementById('iuser');
                                            var email=window.localStorage.getItem("email");
                                            //iuser.innerHTML=email;
                                            
                                            var fun=null;        
                                            if(mode==="drive"){            
                                                icon="car";
                                            }
                                            else if(mode==="transportation"){
                                                icon="bus";
                                            }  
                                            else if(mode==="cycling"){
                                                icon="bicycle" 
                                            }
                                            else{
                                                icon="user";
                                            }
                                            
                                            //document.getElementById('usernavbar').innerHTML="<a class='navbar-brand' onclick='"+fun+"'><i class='fa'></i>&nbspReport</a><a class='navbar-brand' onclick='loadMap()'><i class='fa fa-hand-o-down'></i>&nbspMy Location</a>";
                                            document.getElementById('usernavbar').innerHTML="<a class='navbar-brand' onclick='positionOnMap()'><i class='fa fa-hand-o-down'></i></a><a class='navbar-brand' onclick='showUserCredits()'><i class='fa fa-trophy'></i></a>";
                                            //document.getElementById('userMode').innerHTML="<a class='navbar-brand' onclick='changeSettings()'><i class='fa fa-"+icon+"'></i></a>";
                                            document.getElementById('userMode').innerHTML="<a class='navbar-brand' onclick='changeMode()'><i class='fa fa-"+icon+"'></i></a>";
                                            document.getElementById('messages').innerHTML="<a class='navbar-brand' onclick='messages()'><i class='fa fa-envelope-o'></i><sub><span id='inboxNumberOfMessages' class='label label-danger'></span></sub></a>";
                                            document.getElementById('pois').innerHTML="<a class='navbar-brand' onclick='showPoisDialog();'><i id='pois_btn' class='fa fa-map-marker'></i></a>";
                                            //document.getElementById('traffic').innerHTML="<a class='navbar-brand toggle_off' onclick='toggleTraffic(this)'><i id='traffic_btn' class='fa fa-road'></i></a>";
                                            
                                            //Get the location. You need that with timeout to identify potential error on geolocation callback       
                                            getLocation();  
                                            //and repeat it
                                            //startIntervalLoc();
                                            var watchID = navigator.geolocation.watchPosition(onSuccess, onError, { enableHighAccuracy: true });
                                            //showAlertBootbox("Enable the GPS on your device to improve location accuracy.","GPS improves accuracy","Ok",8000);
                                            //Send the possitions after specific time
                                            startIntervalPositions();
                                            //check if the speed is related with the operational mode
                                            startIntervalAverages();
                                            //startIntervalcheckModeAndSpeeds();
                                            
                                            //Map starts interval with loadMap
                                            //startIntervalMap();
                                            //intervalRefreshLocation=setInterval(function(){getLocation()},getLoacation);       
                                            //intervalGetReports=setInterval(function(){getReports()},getReports);
                                            //intervalRefreshMap=setInterval(function(){loadMap()},refreshMap);
                                            //Load the map
                                            //setTimeout(loadMap,1500);
                                            loadMapLoop();
                                            
                                            //google.maps.event.addDomListener(window, 'load', loadMap);        
                                            
                                            //Monaca cloud push
                                            monaca.cloud.Push.setHandler(function(data) {
                                                // data variable contains information sent from push notification
                                                //alertify.log('Message from server:'+data.message,0);
                                                showAlertBootbox(data.message,"Incoming message");
                                                
                                                //Get the report
                                                var report=data.report;
                                                if(isReportNear(report.reportLatitude,reportLongitude)){
                                                    insertNewPushPin(report);
                                                }
                                            });
                                        }
                                        freeze=false;
                                    }
                                },cancel:{
                                    label: "No",
                                    className: "btn-default",
                                    callback: function () {
                                        navigator.app.exitApp();
                                    }
                                }
                            }                                        
                        });
                } else {
                    document.addEventListener("online", onOnline, false);
                    document.addEventListener("offline", onOffline, false);
                    document.addEventListener("resume", onResume, false);        
                    document.addEventListener("deviceready", onDeviceReady, false);
                    
                    if(window.localStorage.length>0){
                        
                        setTimeout(getToken,2000);
                        //sometimes is an error here so repeat
                        setTimeout(getToken,6000);
                        
                        //Image Cache
                        startCache();
                                       
                        //var iuser=document.getElementById('iuser');
                        var email=window.localStorage.getItem("email");
                        //iuser.innerHTML=email;
                        
                        var fun=null;        
                        if(mode==="drive"){            
                            icon="car";
                        }
                        else if(mode==="transportation"){
                            icon="bus";
                        }  
                        else if(mode==="cycling"){
                            icon="bicycle" 
                        }
                        else{
                            icon="user";
                        }
                        
                        //document.getElementById('usernavbar').innerHTML="<a class='navbar-brand' onclick='"+fun+"'><i class='fa'></i>&nbspReport</a><a class='navbar-brand' onclick='loadMap()'><i class='fa fa-hand-o-down'></i>&nbspMy Location</a>";
                        document.getElementById('usernavbar').innerHTML="<a class='navbar-brand' onclick='positionOnMap()'><i class='fa fa-hand-o-down'></i></a><a class='navbar-brand' onclick='showUserCredits()'><i class='fa fa-trophy'></i></a>";
                        //document.getElementById('userMode').innerHTML="<a class='navbar-brand' onclick='changeSettings()'><i class='fa fa-"+icon+"'></i></a>";
                        document.getElementById('userMode').innerHTML="<a class='navbar-brand' onclick='changeMode()'><i class='fa fa-"+icon+"'></i></a>";
                        document.getElementById('messages').innerHTML="<a class='navbar-brand' onclick='messages()'><i class='fa fa-envelope-o'></i><sub><span id='inboxNumberOfMessages' class='label label-danger'></span></sub></a>";
                        document.getElementById('pois').innerHTML="<a class='navbar-brand' onclick='showPoisDialog()'><i class='fa fa-map-marker'></i></a>";
                        //document.getElementById('traffic').innerHTML="<a class='navbar-brand toggle_off' onclick='toggleTraffic(this)'><i id='traffic_btn' class='fa fa-road'></i></a>";
                        
                        //Get the location. You need that with timeout to identify potential error on geolocation callback       
                        getLocation();  
                        //and repeat it
                        //startIntervalLoc();
                        var watchID = navigator.geolocation.watchPosition(onSuccess, onError, { enableHighAccuracy: true });
                        //showAlertBootbox("Enable the GPS on your device to improve location accuracy.","GPS improves accuracy","Ok",8000);
                        //Send the possitions after specific time
                        startIntervalPositions();
                        //check if the speed is related with the operational mode
                        startIntervalAverages();
                        //startIntervalcheckModeAndSpeeds();
                        
                        //Map starts interval with loadMap
                        //startIntervalMap();
                        //intervalRefreshLocation=setInterval(function(){getLocation()},getLoacation);       
                        //intervalGetReports=setInterval(function(){getReports()},getReports);
                        //intervalRefreshMap=setInterval(function(){loadMap()},refreshMap);
                        //Load the map
                        //setTimeout(loadMap,1500);
                        loadMapLoop();
                        
                        //google.maps.event.addDomListener(window, 'load', loadMap);        
                        
                        //Monaca cloud push
                        monaca.cloud.Push.setHandler(function(data) {
                            // data variable contains information sent from push notification
                            //alertify.log('Message from server:'+data.message,0);
                            showAlertBootbox(data.message,"Incoming message");
                            
                            //Get the report
                            var report=data.report;
                            if(isReportNear(report.reportLatitude,reportLongitude)){
                                insertNewPushPin(report);
                            }
                        });
                    }
                }
                
                
            }
    
            // Cordova is loaded and it is now safe to make calls Cordova methods
            function onDeviceReady() {
                //showAlert('devive is ready');        
                //stop the loading gif
                //setTimeout(unloadLoadingGif,2000);
                googleLogin();
                
                //Backround Class!
                if(backround==='black'){
                    var backroundClass='navbar navbar-inverse navbar-fixed-top';
                }else {
                    var backroundClass='navbar navbar-default navbar-fixed-top';
                }
                var navBarHead=document.getElementById('navBarHead');
                navBarHead.className=backroundClass;
                
                //for ios devices
                var platform =window.device.platform;
                if(platform !== "Android"){        
                    //var navBarDivs=document.getElementsByClassName("navbar-fixed-top");        
                    //navBarDivs[0].className = navBarDivs[0].className + " iosNavbar";        
                    
                    if(localStorage.getItem("backround")==null){
                        navBarHead.className="navbar navbar-default navbar-fixed-top navbar-padding-top";
                        backround='white';
                    }
                }
                
            }
            
            function onResume(){
                //navigator.notification.beep(2);
                //alertify.log("You are online again",1000);
                //status="online";
            }
    
            // Handle the online event
            function onOnline() {
                navigator.notification.beep(1);
                //alertify.log("You are online",1000);
                //status="online";
            }
    
            function onOffline() {
                showAlertBootbox("Seems like you are offline","Offline");
                //alertify.alert("Seems you are offline..");
                //status="offline";
            }
    
            //Double click remove the 300ms
            if ('addEventListener' in document) {
                document.addEventListener('DOMContentLoaded', function() {
                    FastClick.attach(document.body);
                }, false);
            }
            
            function toggleTraffic(item){
                if(item.className == "navbar-brand toggle_on") {
                    item.className="navbar-brand toggle_off";
                    document.getElementById('traffic_btn').className="fa fa-road";
                    if(trafficLayer){
                        map.removeLayer(trafficLayer);
                    }
                } else {
                    item.className="navbar-brand toggle_on";
                    document.getElementById('traffic_btn').className="fa fa-road toggleTrafficOn";
                    getBoundingBoxCoords();
                }
            }
        </script>
    </head>
    <body onload="onLoad()">
        <div id="wrap">
            <div class="hide" id="menuBar">
                <nav class="navbar navbar-inverse navbar-fixed-top" id="navBarHead" role="navigation">
                    <div class="container">
                        <div class="navbar-header">
                            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                                <span class="sr-only">Toggle navigation</span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                            </button>
                            <!-- <a class="navbar-brand" onclick="callAnothePage('index.html')"><i class="fa fa-car fa-2x"></i ></a>  -->
                            <!-- <a class="navbar-brand" onclick="loadMap()"><i class="fa fa-car"></i>&nbsp;<i class="fa fa-bicycle"></i>&nbsp;<i class="fa fa-bus"></i></a> -->
                            <!-- <a class="navbar-brand" onclick="loadMap()"><i class="fa fa-map-marker fa-2x"></i>&nbsp Map</a> -->
                            <div id="usernavbar"></div>
                            <div id="userMode"></div>
                            <div id="pois"></div>
                            <div id="messages"></div>
                            <div id="traffic"></div>
                        </div>
                        <div id="navbar" class="navbar-collapse collapse navbar-right">
                            <ul class="list-group">
                            <!-- <li class="list-group-item"><span class="fa fa-user fa-2x"></span> &nbsp;<i class="whiteLetters" id="iuser"> </i></li>  -->
                                <li class="list-group-item"  onclick="changeSettings()"><span class="fa fa-wrench fa-2x"></span><i class="">Settings</i></li>
                                <a>&nbsp</a>
                                <li class="list-group-item"  onclick="openManual()"><span class="fa fa-support fa-2x"></span><i class=""> User Manual</i></li>
                                <a>&nbsp</a>
                                <li class="list-group-item"  onclick="showAbout()"><span class="fa fa-info-circle fa-2x"></span><i class=""> About</i></li>
                                <a>&nbsp</a>
                                <li class="list-group-item" onclick="logout()"><span class="fa fa-sign-out fa-2x"></span><i class="whiteLetters"> Logout </i></li>
                            </ul>
                        </div><!--/.navbar-collapse -->
                    </div>
                </nav>
            </div>
            <div id="unauthenticated" class="hide">
            <!-- Main jumbotron for a primary marketing message or call to action -->
                <div class="jumbotron logoDiv">
                    <!--<div class="container">
                        <h1></h1>
                        <p>This is some text for the project</p>        
                        <p><a class="btn btn-primary btn-lg" href="learnMore.html" role="button">Learn more &raquo;</a></p>
                    </div>-->
                </div>    
                <div class="container transbox">        
                    <div class="row ">
                        <div class="col-sm-11">
                            <div id="loginForm">    
                                <div class="form-group">
                                    <label for="login_email" class="col-sm-2 control-label">Email</label>
                                    <div class="col-sm-10">
                                        <input type="email" class="form-control" id="login_email" placeholder="Email">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="login_password" class="col-sm-2 control-label">Password</label>
                                    <div class="col-sm-10">
                                        <input type="password" class="form-control" id="login_password" placeholder="Password">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div style="text-align:right"><a href="passwordRetrive.html">Reset Password</a></div>
                                </div>
                                <div class="form-group">
                                    <button class="btn btn-info btn-block" onclick="LoginBtn()">Sign in</button>
                                </div>
                                <!-- Regisration process -->
                                <!-- 
                                <div class="row">
                                    <div class="col-sm-11">
                                           <p > <a href="register.html" class="register-link">Need an account? <strong>Register</strong><i class="icon-arrow-right"></i></a><br>
                                           <!-- <a onclick="forgotPassword()" class="password-link"><small>Forgot your password?</small></a> </p> --><!--
                                       </div> 
                                </div> 
                                -->
                                <div id="register" class="">
                                    <form action="register.html">
                                        <div class="form-group">
                                            <button class="btn btn-success btn-block">Register</button>
                                        </div>
                                    </form>
                                    <!--<div id="login" class="form-group">
                                        <a  class="btn btn-danger btn-block">Sign in with Google</a>
                                    </div>-->
                                    <div id="loginFB" class="form-group">
                                        <a onclick='loginFB()' class="btn btn-primary btn-block">Sign in with Facebook</a>
                                    </div>
                                </div>
                                <!--</form>-->
                            </div><!-- end of login form -->

                            <div class="hide" id="passwordForgot">
                                <div class="form-group">
                                    <label for="forgot_email" class="col-sm-2 control-label">Email</label>
                                    <div class="col-sm-10">
                                        <input type="email" class="form-control" id="forgot_email" placeholder="Email">
                                    </div>
                                </div>
                                <div class="form-group">
	                                <button class="btn btn-block btn-primary" type="submit">Reset password</button>
                                </div>					
	                        </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="mainPage" class="hide">
                <!-- LOADER --> 
                <div id='loader' class="text-center center-block">
                    <img src="img/loading4.gif" class="img-responsive" alt="loading..."/>
                </div>
                <!-- <div id="target"></div> --> 
            </div>
            <div class="hide">
                <div id='messagesDiv' title="Inbox">
                    <table id="messagesTable" class="table-condensed"></table>
                </div>
            </div>
        </div>
    </div>
    </div>
    </div>  
    </div>
    </div>

        <div class="hide">
            <div id="credits" title="User Credits">
                <div class="row">
                    <div id="creditsData"></div>
                </div>    
            </div>
             
    <!-- This div is for geting icons from server and checking the connection status -->         
    <div class="hide">
        <div id="statusDiv">            
        </div>
    </div>
            <!-- Notifications about new reports -->
            <div id="reportNotification" title="Notification about Report">
              <p id="reportNotificationText"></p>
            </div>

            <!-- User Manual -->
            <div class='hide'>
                <div id="userManual" title="User Manual" data-overlay-theme="a">
                    <h4>User Menu</h4>
                      <p>1. The menu button is on the top-right corner, indicated by three horizontal lines.</p>
                      <p>2. On system's settings option, user can modify some of system's parameters:</p>
                      <ul>
                          <li><u>The operation mode (drive/walk/transportation/cycle)</u>: There is a corresponding map layer displaying additional information depending on the selected user mode. Moreover, user's position on the map is refreshed more/less often accordingly.</li>
                          <li><u>Near distance of reports on map (km)</u>: This option defines the radius from user's position in which incoming reports are displayed on map.</li>
                          <li><u>Near distance of notifications (km)</u>: This option defines the radius from user's position in which notifications and messages for incoming reports are showing up on screen.</li>
                          <li><u>Reports time (minutes)</u>: This option defines the maximum age of displayed reports. </li> <!-- Please note that each report is postponed for 15 minutes in case of positive evaluation -->
                          <li><u>Show notifications</u>: If this option is enabled, the user will be informed for new reports.</li>
                          <li><u>Show my reports</u>: If this option is enabled, user's reports will be showed on the map.</li>
                          <li><u>Notification sound</u>: If this option is enabled, a sound will beep everytime the user receives a new notification.</li>
                      </ul>
                      <p>3. The button <i class="fa fa-hand-o-down fa-2x"></i> returns the map on the current position. </p>
                      <p>4. The button <i class="fa fa-trophy fa-2x"></i> displays user's credits. </p>
                      <p>5. The button <i class="fa fa-car fa-2x"></i> / <i class="fa fa-user fa-2x"></i> displays user's operational mode. If pressed, opens a dialog to change the operational mode. </p>
                      <p>6. The button <i class="fa fa-map-marker fa-2x"></i> displays a menu from which the user can filter POIs shown on the map by type and range. </p>
                      <p>7. The button <i class="fa fa-envelope fa-2x"></i> displays user's inbox with reports that need evaluation. </p>
                      <p>8. The backround color for each pushpin reflects report's <b>severity</b> whereas the transparecy reflects <b>reliability</b>: </p>
                      
                    <table style="width:100% text-align:center;">
                          <tr>
                            <th>&nbsp;&nbsp;Severity</th>
                            <th>&nbsp;&nbsp;Reliability</th>    	
                          </tr>
                          <tr>
                            <td>&nbsp;&nbsp;<i class="fa fa-road fa-2x" style="background-color:Red; border:solid 2px; border-radius: 20%;"></i> <b>High</b></td>
                            <td>&nbsp;&nbsp;<i class="fa fa-road fa-2x" style="background-color:Chartreuse; border:solid 2px; border-radius: 20%; opacity: 1;"></i> <b>High</b></td>		
                          </tr>
                          <tr>
                            <td>&nbsp;&nbsp;<i class="fa fa-road fa-2x" style="background-color:DarkOrange; border:solid 2px; border-radius: 20%;"></i> <b>Medium</b></td>
                            <td>&nbsp;&nbsp;<i class="fa fa-road fa-2x" style="background-color:Chartreuse; border:solid 2px; border-radius: 20%; opacity: 0.7;"></i> <b>Medium</b></td>		
                          </tr>
                          <tr>
                          <td>&nbsp;&nbsp;<i class="fa fa-road fa-2x" style="background-color:Chartreuse; border:solid 2px; border-radius: 20%;"></i> <b>Low</b></td>
                          <td>&nbsp;&nbsp;<i class="fa fa-road fa-2x" style="background-color:Chartreuse; border:solid 2px; border-radius: 20%; opacity: 0.4;"></i> <b>Low</b></td>
                          </tr>
                    </table>
                </div>
            </div>

            <div id="geolocation"></div>
            <div id="push"></div>   
        </div>	<!-- wrap -->
        <!--      <hr> -->
    
        <!--<div style="position: absolute; margin-left: auto; width: 80%; height: 10%; margin-right: auto; bottom: 70px; left: 0px; right: 0px;">
            <input type="range" id="myRange" value="0" max="15" min="-15" step="5">
            <div style="font-size: 50%; display: table; table-layout: fixed; width: 100%;">
                  <div style="display: table-cell; text-align: center;">-15m</div>
                  <div style="display: table-cell; text-align: center;">-10m</div>
                  <div style="display: table-cell; text-align: center;">-5m</div>
                  <div style="display: table-cell; text-align: center;">0</div>
                  <div style="display: table-cell; text-align: center;">+5m</div>
                  <div style="display: table-cell; text-align: center;">+10m</div>
                  <div style="display: table-cell; text-align: center;">+15m</div>
            </div>

        </div>-->
      
        <!--<div class="hide" id="reportButtons"> 
            <div class="col-xs-1"></div> 
            <div class="col-xs-5" id="newPoiButton">
                <div class=" text-center">
                    <div class="alert alert-info clickable" role="alert" onclick="createPlan()" id="a" style="border: 2px solid; border-top-left-radius: 25px; border-bottom-left-radius: 25px;">
                      <a class="alert-link"><i class="fa fa-map-marker"></i>&nbsp;New POI</a>
                    </div>
                </div>        
                <!--<div class="col-xs-4 col-xs-offset-8"></div>-->              
            <!--</div>
            <div class="col-xs-5" id="reportButton">
                <div class=" text-center">
                    <div class="alert alert-danger clickable" role="alert" onclick="reportPrompt()" id="a" style="border: 2px solid; border-top-right-radius: 25px; border-bottom-right-radius: 25px;">
                      <a class="alert-link"><i class="fa fa-warning"></i>&nbsp;New Report</a>
                    </div>
                </div>        
                <!--<div class="col-xs-4 col-xs-offset-8"></div>-->              
            <!--</div>
            <div class="col-xs-1"></div>
        </div>--> 
        
        <div class="hide" id="reportButtons"> 
            <div id="buttons">
            <div class="col-xs-4" id="reportButton">
                <div class=" text-center">
                    <div class="alert clickable" onclick="getUserTrustLevel();" id="a" style="border: 2px solid; border-color: grey; border-top-left-radius: 25px; border-bottom-left-radius: 25px; margin-left: 5%; color: white; background-color: rgba(217, 217, 217, 0.6); box-shadow: 0 16px 24px 2px rgba(0,0,0,0.14), 0 6px 30px 5px rgba(0,0,0,0.12), 0 8px 10px -5px rgba(0,0,0,0.4);">
                      <a class="alert-link" style="color: #00b300;"><strong><i class="fa fa-map-marker"></i>&nbsp;POI</strong></a>
                    </div>
                </div>        
                <!--<div class="col-xs-4 col-xs-offset-8"></div>-->              
            </div>
            <div class="col-xs-4" id="reportButton">
                <div class=" text-center">
                    <div class="alert clickable" onclick="createPlan();" id="a" style="border: 2px solid; border-color: grey; color: white; background-color: rgba(217, 217, 217, 0.6); box-shadow: 0 16px 24px 2px rgba(0,0,0,0.14), 0 6px 30px 5px rgba(0,0,0,0.12), 0 8px 10px -5px rgba(0,0,0,0.4);">
                      <a class="alert-link" style="color: #0066cc;"><strong><i class="fa fa-map-signs"></i>&nbsp;Plan</strong></a>
                    </div>
                </div>        
                <!--<div class="col-xs-4 col-xs-offset-8"></div>-->              
            </div> 
            <div class="col-xs-4" id="reportButton">
                <div class=" text-center">
                    <div class="alert clickable" onclick="reportPrompt();" id="a" style="border: 2px solid; border-color: grey; border-top-right-radius: 25px; border-bottom-right-radius: 25px; margin-right: 5%; color: white; background-color: rgba(217, 217, 217, 0.6); box-shadow: 0 16px 24px 2px rgba(0,0,0,0.14), 0 6px 30px 5px rgba(0,0,0,0.12), 0 8px 10px -5px rgba(0,0,0,0.4);">
                      <a class="alert-link" style="color: #ff4d4d;"><strong><i class="fa fa-warning"></i>&nbsp;Report</strong></a>
                    </div>
                </div>        
                <!--<div class="col-xs-4 col-xs-offset-8"></div>-->              
            </div>
            </div>
        </div>
        
        <div id="routeInfo" style="display: none; position: absolute; left: 50%; top: 60px; z-index: 0;">
            <div style="position: relative; left: -50%;">
                <div style="border: 2px solid; border-radius: 25px; color: white; background-color: rgba(0, 150, 136, 0.6); box-shadow: 0 16px 24px 2px rgba(0,0,0,0.14), 0 6px 30px 5px rgba(0,0,0,0.12), 0 8px 10px -5px rgba(0,0,0,0.4); padding: 5px;">
                    <span id="routeDist"></span> | <span id="routeDur"></span>
                </div>
            </div>
        </div>
        
        <div id="routeInstr" style="display: none; position: absolute; left: 50%; top: 100px; z-index: 0;">
            <div style="position: relative; left: -50%;">
                <div style="border: 2px solid; border-radius: 25px; color: white; background-color: rgba(0, 150, 136, 0.6); box-shadow: 0 16px 24px 2px rgba(0,0,0,0.14), 0 6px 30px 5px rgba(0,0,0,0.12), 0 8px 10px -5px rgba(0,0,0,0.4); padding: 5px;">
                    <center>
                        <span id="instruction"></span>
                    </center>
                </div>
            </div>
        </div>
        
        <div id="cancelRoute" style="display: none; position: absolute; left: 50%; bottom: 65px; z-index: 0;">
            <div style="position: relative; left: -50%;">
                <button type="button" class="btn btn-danger" onClick="cancelRoute();"><i class='fa fa-map-signs'></i> Cancel</button>
            </div>
        </div>
        
        <div id="cancelPlan" style="display: none; position: absolute; left: 50%; bottom: 65px; z-index: 0;">
            <div style="position: relative; left: -50%;">
                <button type="button" class="btn btn-danger" onClick="cancelPlan();"><i class='fa fa-map-signs'></i> Cancel</button>
            </div>
        </div>
       
        <footer>
        </footer>
      
    	<!-- LEAFLET -->
        <script src="leaflet/leaflet.js"></script>
        <link rel="stylesheet" href="leaflet/leaflet.css"> 
        
        <style>
            .leaflet-popup-content-wrapper {
                background-color: rgba(0, 150, 136, 0.5)
            }
        </style>
     
        <script src="js/jquery.js" type="text/javascript"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.1.js"><\/script>')</script>


        <!--
        <script src="js/jquery-ui.js" type="text/javascript"></script>
        <link rel="stylesheet" href="css/jquery-ui.css"> 
        -->

        <script src="js/vendor/bootbox.js"></script>     
        <script src="js/vendor/bootstrap.min.js"></script>
        <script src="js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
        
        <script src="js/vendor/fastclick.js"></script>
        
        <!-- Include scritps -->
        
        <script src="js/vendor/alertify.js/alertify.min.js"></script>
        <link rel="stylesheet" href="js/vendor/alertify.js/alertify.core.css">
        <link rel="stylesheet" href="js/vendor/alertify.js/alertify.default.css"> 
        

        <script src="js/config.js"></script> 
        <script src="js/functions.js"></script> 
        <script src="js/main.js"></script>    
        <script src="js/sha.js"></script>
        <script src="js/googleLogin.js"></script>
        <script src="js/maps.js" type="text/javascript"></script>
        <script src="js/vendor/imgcache.js"></script>
       
        <!--
            <script src="js/vendor/aes.js"></script>
            <script src="js/vendor/aes-json-format.js"></script>
            -->
        <!-- <script src="vendor/diagnostic.js"></script> -->
         
        <!-- AwesomeMarkers -->        
        <link rel="stylesheet" href="css/ionicons.min.css">
        <link rel="stylesheet" href="css/leaflet.awesome-markers.css"> 
        <script src="js/vendor/leaflet.awesome-markers.js"></script>
        
        <!-- <script src="http://83.212.168.47:8081/target/target-script-min.js#anonymous"></script> -->

        <!-- Leaflet compass -->
        <script src="js/vendor/leaflet-compass.js" type="text/javascript"></script>

        <script src="js/vendor/openfb.js" type="text/javascript"></script>
        <script type="text/javascript"></script>
        
         <!-- Leaflet Routing Machine-->
        <link rel="stylesheet" href="leaflet_routing/dist/leaflet-routing-machine.css" />
        <script src="leaflet_routing/dist/leaflet-routing-machine.min.js"></script>
        
        <!-- Valhalla -->
        <script src="valhalla/lrm-valhalla.min.js"></script>
    </body>
</html>
